==================================================== FAILURES =====================================================
__________________________ TestAudioAndMetadata.test_generate_audio_uses_default_speaker __________________________

self = <generate_audiobook_test.TestAudioAndMetadata object at 0x000002140ECDD850>
m_open = <MagicMock name='open' id='2285171898944'>, m_exists = <MagicMock name='exists' id='2285171898704'>
m_upload = <MagicMock name='upload_audiobook' id='2285171447072'>, mock_tts_client = <MagicMock id='2285171706096'>
mock_audio_segment = <MagicMock name='from_wav()' id='2285171265744'>

    @patch("generate_audiobook.upload_audiobook", return_value=True)
    @patch("os.path.exists", return_value=False)
    @patch("builtins.open", new_callable=mock_open, read_data=b"dummy_wav_data")
    def test_generate_audio_uses_default_speaker(
        self, m_open, m_exists, m_upload, mock_tts_client, mock_audio_segment
    ):
        mock_audio_segment.export.return_value.read.return_value = b"A" * (1024 * 1024)
        config = {
            "api_url": "url",
            "api_key": "key",
            "reference_voice_file": "path/that/does/not/exist.wav",
        }
>       ga.generate_and_upload_audio("text", [{"title": "t", "text": "t"}], config, "d")

generate_audiobook_test.py:591:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
generate_audiobook.py:356: in generate_and_upload_audio
    os.makedirs(ARCHIVE_FOLDER)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

name = 'archive_mp3', mode = 511, exist_ok = False

>   ???
E   FileExistsError: [WinError 183] Cannot create a file when that file already exists: 'archive_mp3'

<frozen os>:225: FileExistsError
================================================ warnings summary =================================================
..\..\audiogeneratorenv\Lib\site-packages\pydub\utils.py:14
  C:\Users\WilliamFetzner\OneDrive - Q-Centrix, LLC\audio-digest-hub\audiogeneratorenv\Lib\site-packages\pydub\utils.py:14: DeprecationWarning: 'audioop' is deprecated and slated for removal in Python 3.13
    import audioop

..\..\audiogeneratorenv\Lib\site-packages\dateparser\timezone_parser.py:81
  C:\Users\WilliamFetzner\OneDrive - Q-Centrix, LLC\audio-digest-hub\audiogeneratorenv\Lib\site-packages\dateparser\timezone_parser.py:81: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    offset = datetime.now() - datetime.utcnow()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
============================================= short test summary info =============================================
FAILED generate_audiobook_test.py::TestAudioAndMetadata::test_generate_audio_uses_default_speaker - FileExistsError: [WinError 183] Cannot create a file when that file already exists: 'archive_mp3'